<body>
  <section class="mx-3 p-1">
    <div class="main">

      <div class="card text-center" *ngIf="role === 'PRS'">
          <div class="card-header  text-body bg-body  active d-flex justify-content-between">
            <ul class="nav nav-tabs card-header-tabs ">
              <li class="nav-item">
                <!-- <button class="nav-link " aria-current="true" (click)="brouillonclique()" >Brouillon Liste des Demandes</button> -->
                <a class="nav-link " aria-current="true" [class.active]="brouillonActive" (click)="brouillonclique()">Brouillon Liste des Demandes</a>
              </li>
              <li class="nav-item ">
                <button class="nav-link" aria-current="true"[class.active]="listesessionActive" (click)="brouilloncliqueactive()">Listes en attente Session</button>
              </li>
              <li>
                <button
                type="button"
                class="btn "
                [routerLink]="'/main/creationprescripteur'"
              >
              <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="solaris-icon si-add text-black" viewBox="0 0 1000 1000">
                <path d="M850 400H600V150a50 50 0 0 0-50-50H450a50 50 0 0 0-50 50v250H150a50 50 0 0 0-50 50v100a50 50 0 0 0 50 50h250v250a50 50 0 0 0 50 50h100a50 50 0 0 0 50-50V600h250a50 50 0 0 0 50-50V450a50 50 0 0 0-50-50" style="fill-rule:evenodd"/>
              </svg>
              </button>
              </li>
            </ul>
            
          </div>
          <div class="" *ngIf="isbrouillon===true">
              <table class="table table-fixed">
                <thead>
                  <tr class="titre">
                    <th scope="col" class="titre col-1">Identifiant</th>
                    <th scope="col" class="titre col-1">Titre</th>
                    <th scope="col" class=" titre col-2">Motif</th>
                    <th scope="col" class="titre col-2">Devise</th>
                    <th scope="col" class="titre col-2">Montant</th>
                    <th scope="col" class="titre col-2">Fournisseurs</th>
                    <th scope="col" class="titre col-2">Date création</th>
                  </tr>
                </thead>
                <tbody
                >
                  <tr *ngFor="let detail of this.brouillon" [routerLink]="['/main/teste/', detail.id]"
                  class="mb-1 p-1 scrollspy-example"
                  data-spy="scroll"
                  data-target="#navbarExample"
                  data-offset="50"
                  
                  >  
                  <td class="col-1 ">{{ detail.identifiant }}</td>
                  <td class="col-1 ">{{ detail.titre }}</td>
                  <td class="col-2 ">{{ detail.motif }}</td>
                  <td class="col-2 ">{{ detail.devise }}</td>
                  <td class="col-2 ">{{ detail.montantht }}</td>
                  <td class="col-2 ">{{ detail.fournisseur }}</td>
                  <td class="col-2 ">{{ detail.dateCreation | date:'EEEE dd MMMM yyyy HH:mm':'fr-FR' }} </td>
                  </tr>
                    
                </tbody>
              </table>
          </div>
          <!-- ATTENTE SESSION -->
          <div class="" *ngIf="brouilloncliqueActive===true" style=" height: 300px;">
            <ul class="list-group"*ngFor="let detail of this.AttenteSession" >
              <li class="list-group-item p-3 d-flex justify-content-between align-items-center">
                {{detail.titre}}
                <button class="btn" class="badge text-bg-info rounded-pill" (click)="annulerdemande(detail.id)">annuler</button>
              </li>
              
            </ul>
          </div>
      </div>




 <br />
<!-- table active demande -->
 <div class="card">
  <div
    class="card-header p-3 navbar navbar-static d-flex justify-content-between"
    id="navbarExample"
  >
    <div><p class="">Listes des Demandes CD Active</p></div>
    <div>
      <div *ngIf="role === 'PRS'">
        <button type="button" class="btn btn-primary"  (click)="exportToExcel()">
          Extraction
        </button>
      </div>
      <div *ngIf="role === 'CDG' || role === 'ACH'">
        <div class="d-flex justify-content-end">
          <button
          type="button"
          class="btn"
          [routerLink]="'/main/creationprescripteur'"
        >
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="solaris-icon si-add" viewBox="0 0 1000 1000">
          <path d="M850 400H600V150a50 50 0 0 0-50-50H450a50 50 0 0 0-50 50v250H150a50 50 0 0 0-50 50v100a50 50 0 0 0 50 50h250v250a50 50 0 0 0 50 50h100a50 50 0 0 0 50-50V600h250a50 50 0 0 0 50-50V450a50 50 0 0 0-50-50" style="fill-rule:evenodd"/>
        </svg>
        </button>
          <button
            type="button"
            class="btn btn-primary  mx-2"
            routerLink="/validation"
          >
            Validation
          </button>
          <button type="button" class="btn btn-primary " (click)="exportToExcel()">
            Extraction
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <div *ngFor="let groupTitle of groupedDetailDemandes | keyvalue">
    <fieldset class="form-group border border-end-0">
      <legend class="px-2 d-flex justify-content-between">
        <h5 class="p-2">{{ groupTitle.key }}</h5>
        <!-- (click)="toggleUp(groupTitle.key)" -->
        <a
          class="fs-3 text fw-bold btn"
          data-bs-toggle="collapse"
          [attr.href]="'#collapseExample-' + groupTitle.key"
          aria-expanded="false"
          [attr.aria-controls]="'collapseExample-' + groupTitle.key"
        >
          +
      </a>
      </legend>
      <div class="collapse" id="collapseExample-{{ groupTitle.key }}">  <div data-offset="50">
                        <table class="table">
                          <tr>
                            <th class="p-3">Identifiant</th>
                            <th class="p-3">Motif</th>
                            <th class="p-3">Devise</th>
                            <th class="p-3">Montant (HT)</th>
                            <th class="p-3">Fournisseur</th>
                            <th class="p-3">Date Creation</th>
                            </tr>
                          <!-- <tr *ngFor="let detailDemande of groupTitle.value;  let i = index" [routerLink]="['/main/teste/', detailDemande.id]" >
                            <ng-container 
                            >
                              
                              <td class="p-3 ">{{ this.detailDemande.identifiant }}</td>
                              <td class="p-3 ">{{ this.detailDemande.motif }}</td>
                              <td class="p-3 ">{{ this.detailDemande.devise }}</td>
                              <td class="p-3">{{ this.detailDemande.montantht }}</td>
                              <td class="p-3 ">{{ this.detailDemande.fournisseur }}</td>
                              <td class="p-3">{{ this.detailDemande.dateCreation | date:'EEEE dd MMMM yyyy HH:mm':'fr-FR' }}</td>
                             
                              
                                </ng-container>
                          </tr> -->
                        </table>
                      </div>
                </div>
        
    </fieldset>
  </div>
  
    </div>        
  </div>
  </section>
</body>










<!-- version taloha -->
<!-- <table class="table table-fixed">
  <thead>
    <tr class="titre">
      <th scope="col" class="titre col-1">Identifiant</th>
      <th scope="col" class="titre col-1">Titre</th>
      <th scope="col" class=" titre col-2">Motif</th>
      <th scope="col" class="titre col-2">Devise</th>
      <th scope="col" class="titre col-2">Montant</th>
      <th scope="col" class="titre col-2">Fournisseurs</th>
      <th scope="col" class="titre col-2">Date création</th>
    </tr>
  </thead>
  <tbody
  >
    <tr *ngFor="let detail of this.DetailDemande" [routerLink]="['/main/teste/', detail.id]"
    class="mb-1 p-1 scrollspy-example "
    data-spy="scroll"
    data-target="#navbarExample"
    data-offset="50"
    >  
          <td class="col-1 ">{{ detail.id }}</td>
          <td class="col-1 ">{{ detail.titre }}</td>
          <td class="col-2 ">{{ detail.motif }}</td>
          <td class="col-2 ">{{ detail.devise }}</td>
          <td class="col-2 ">{{ detail.montantht }}</td>
          <td class="col-2 ">{{ detail.fournisseur }}</td>
          <td class="col-2 "> detail.date </td>
    </tr>
      
  </tbody>
</table> -->








<!-- <table class="table table-fixed">
  <thead>
    <tr class="titre">
      <th scope="col" class="titre col-1">Titre</th>
      <th scope="col" class="titre col-1">Identifiant</th>
      <th scope="col" class="titre col-2">Motif</th>
      <th scope="col" class="titre col-2">Devise</th>
      <th scope="col" class="titre col-2">Montant</th>
      <th scope="col" class="titre col-2">Fournisseurs</th>
      <th scope="col" class="titre col-2">Date création</th>
    </tr>
  </thead>
  <tbody>
    <ng-container *ngFor="let groupTitle of groupedDetailDemandes | keyvalue">
      <tr>
        <td colspan="6" class="titre col-1">{{ groupTitle.key }}</td>
      </tr>
      <tr *ngFor="let detailDemande of groupTitle.value;">
        <td class="col-1">{{detailDemande.identifiant}}</td>
        <td class="titre col-2">{{detailDemande.motif}}</td>
        <td class="titre col-2">{{detailDemande.devise}}</td>
        <td class="titre col-2">{{detailDemande.montantht}}</td>
        <td class="titre col-2">{{detailDemande.fournisseur}}</td>
        <td class="titre col-2">{{detailDemande.dateCreation}}</td>
      </tr>
    </ng-container>
  </tbody>
</table> -->









