<body>
  <section class="mx-4  p-1">
    <div class="main">

      <div class="">
        <div class="d-flex justify-content-end p-2">
          <button
                type="button"
                class="btn "
                [routerLink]="'/main/creationprescripteur'"
              >
              <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="solaris-icon si-add text-black me-2" viewBox="0 0 1000 1000">
                <path d="M850 400H600V150a50 50 0 0 0-50-50H450a50 50 0 0 0-50 50v250H150a50 50 0 0 0-50 50v100a50 50 0 0 0 50 50h250v250a50 50 0 0 0 50 50h100a50 50 0 0 0 50-50V600h250a50 50 0 0 0 50-50V450a50 50 0 0 0-50-50" style="fill-rule:evenodd"/>
              </svg> Ajout de ligne
              </button>
              <button type="button" class="btn  btn-secondary " (click)="exportToExcel()">
                Extraction
              </button>
        </div>
          <div class="card-header  text-body bg-body  active ">
            <ul class="nav nav-tabs card-header-tabs ">
             
              <li class="nav-item" *ngIf="role === 'PRS'">
                <!-- <button class="nav-link " aria-current="true" (click)="brouillonclique()" >Brouillon Liste des Demandes</button> -->
                <a class="nav-link " aria-current="true" [class.active]="brouillonActive" (click)="brouillonclique()">Brouillon liste des demandes</a>
              </li>
              <li class="nav-item " *ngIf="role === 'PRS'">
                <button class="nav-link" aria-current="true"[class.active]="listesessionActive" (click)="brouilloncliqueactive()">Liste en attente session</button>
              </li>
             
              
                <li class="nav-item ">
                  <button class="nav-link" aria-current="true"[class.active]="Activedemande" (click)="brouilloncliqueactivedemande()">Liste CD active</button>
                  
                </li>
                
             
            </ul>
            
          </div>



          
          <!-- BROUILLON -->
          <div class="card" *ngIf="isbrouillon===true">
             
            <table class="table table-fixed">
              <thead>
                <tr class="titre" >
                  <th scope="col">
                  <div class="font-size-16">
                    <input type="checkbox" class="form-check-input" id="contacusercheck" /><label class="form-check-label" for="contacusercheck"></label></div>
                  </th>
                 
                      <th scope="col" class="titre "style="width:140px;">Identifiant</th>
                      <th scope="col" class="titre "style="width:140px;">Titre</th>
                      <th scope="col" class=" titre "style="width:140px;">Motif</th>
                      <th scope="col" class="titre "style="width:140px;">Devise</th>
                      <th scope="col" class="titre "style="width:140px;">Montant</th>
                      <th scope="col" class="titre "style="width:140px;">Fournisseurs</th>
                      <th scope="col" class="titre "style="width:140px;">Date création</th>
                      <th scope="col" class="titre "style="width:177px;">Action</th>
                </tr>
              </thead>
              <tbody>
                <!-- [routerLink]="['/main/teste/', detail.id]" -->
                <tr *ngFor="let detail of this.brouillon" 
                class=" p-1 scrollspy-example"
                data-spy="scroll"
                data-target="#navbarExample"
                data-offset="50"
                > 
                 <!-- <a class="btn"  data-bs-toggle="collapse" [attr.href]="'#'+ detail.identifiant" role="button" aria-expanded="false" [attr.aria-controls]="detail.identifiant"> -->
                  <td>
                    <div class="font-size-16"><input type="checkbox" class="form-check-input" id="contacusercheck" /><label class="form-check-label" for="contacusercheck"></label></div>
                    </td>  
                  <td style="width:140px;" class="texte">{{ detail.identifiant }}</td>
                    <td style="width:140px;"class="texte">{{ detail.titre }}</td>
                    <td style="width:140px;"class="texte">{{ detail.motif }}</td>
                    <td style="width:140px;"class="texte">{{ detail.devise }}</td>
                    <td style="width:140px;"class="texte">{{ detail.montantht }}</td>
                    <td style="width:140px;"class="texte">{{ detail.fournisseur }}</td>
                    <td style="width:140px;"class="texte">{{ detail.dateCreation | date:'d/M/y':'fr-FR' }} </td>
                    <td style="width:166px;"class="texte">
                      <ul class="list-inline mb-0">
                          <li class="list-inline-item">
                                mo                         
                      </li>
                          <li class="list-inline-item">raay
                          </li>
                          <li class="list-inline-item dropdown">
                              ok
                          </li>
                      </ul>
                  </td>
                    <!-- </a> -->
                <div class="collapse" id="{{detail.identifiant}}">
                  <div class="modal-header">
                    <h5 class="modal-title"></h5>
                    <button type="button" class="btn-close d-flex justify-content-end" data-bs-toggle="collapse" [attr.href]="'#' + detail.identifiant" aria-expanded="false" [attr.aria-controls]="detail.identifiant" data-bs-title="Close"><span class="visually-hidden">Close</span></button>
                    
                  </div>
                  <div class="">
                   <div>
                    <button type="button" class="btn mx-2 btn-primary " [routerLink]="['/main/teste/', detail.id]">Modifier</button>
                    <button type="button" class="btn btn-secondary mx-2" data-bs-toggle="modal" data-bs-target="#exampleModal" (click)="getid(detail.id)" >Supprimer</button> 
                    <button type="button" class="btn  btn-primary " data-bs-toggle="modal" data-bs-target="#example"(click)="getid(detail.id)">Soumettre</button>
                  
                  </div>
                  </div>
                </div>
                 

              </tr>
              </tbody>
              
            </table>
            <!-- modal suppression -->
            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h1 class="modal-title h5" id="exampleModalLabel">Modal title</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" data-bs-toggle="tooltip" data-bs-placement="bottom" data-bs-title="Close"><span class="visually-hidden">Close</span></button>
                  </div>
                  <div class="modal-body">
                    <p>Etes vous sûr de vouloir supprimer cette demande ?</p>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Annuler</button>
                    <!--  -->
                    <button type="button" class="btn btn-primary"  data-bs-dismiss="modal" (click)="supprimationDemande()">Supprimer</button>
                  </div>
                </div>
              </div>
            </div>
            <!-- modal soumission -->
            <div class="modal fade" id="example" tabindex="-1" aria-labelledby="exampleLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h1 class="modal-title h5" id="exampleLabel">Modal title</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" data-bs-toggle="tooltip" data-bs-placement="bottom" data-bs-title="Close"><span class="visually-hidden">Close</span></button>
                  </div>
                  <div class="modal-body">
                    <p>Etes vous sûr de vouloir soumettre cette demande ?</p>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Annuler</button>
                    <!--  -->
                    <button type="button" class="btn btn-primary"  data-bs-dismiss="modal"(click)="Soumission()">Soumettre</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- ATTENTE SESSION -->
          <div class="card" *ngIf="brouilloncliqueActive===true" style=" height: 500px;">
            <ul class="list-group"*ngFor="let detail of this.AttenteSession" >
              <li class="list-group-item p-3 d-flex justify-content-between align-items-center">
                {{detail.titre}}
                <button class="btn" class="badge text-bg-info rounded-pill" (click)="annulerdemande()">annuler</button>
              </li>
              
            </ul>
          </div>
          <!-- AVTIVE DEMANDE -->
          
          <div class="card" *ngIf="Activedemandeclique===true" style=" height: 500px;"
                class="mb-1 p-1 scrollspy-example "
                data-spy="scroll"
                data-target="#navbarExample"
                data-offset="50"class="listetitre"
          >

          <div class="accordion" id="accordionPanelsStayOpenExample">
          <div class="accordion-item" *ngFor="let titre of groupedDetailDemandes | keyvalue" >
            <p class="accordion-header bg-ligth ">
              <button class="accordion-button" type="button"  data-bs-toggle="collapse"
              [attr.href]="'#collapseExample-' +normaliserTitre(titre.key)"
              aria-expanded="false" 
              [attr.aria-controls]="'collapseExample-' + normaliserTitre(titre.key)">
                {{ titre.key }}
              </button>
            </p>
            <div  class="collapse " id="collapseExample-{{ normaliserTitre(titre.key) }}">
              
                <div *ngFor="let direction of titre.value | keyvalue">
                                 
                  <table class="table">
                      <tr
                      
                      >
                        <th class="p-3">Identifiant</th>
                        <th class="p-3">Motif</th>
                        <th class="p-3">Devise</th>
                        <th class="p-3">Montant (HT)</th>
                        <th class="p-3">Fournisseur</th>
                        <th class="p-3">Date Creation</th>
                        </tr>
                      <tr *ngFor="let demande of direction.value" [routerLink]="['/main/teste/', demande.id]">
                          <td class="p-3 ">{{ this.demande.identifiant }}</td>
                          <td class="p-3 ">{{ this.demande.motif }}</td>
                          <td class="p-3 ">{{ this.demande.devise }}</td>
                          <td class="p-3">{{ this.demande.montantht }}</td>
                          <td classq="p-3 ">{{ this.demande.fournisseur }}</td>
                          <td class="p-3">{{ this.demande.dateCreation | date:'EEEE dd MMMM yyyy HH:mm':'fr-FR' }}</td>
                         
                          
                      </tr>
                    </table>
               
                
              </div>
            </div>
          </div>
        </div>
           
          </div>
      </div>
      

    </div>
   
  </section>
 
</body>

























<div class="container">
  <div class="row align-items-center">
      <div class="col-md-6">
          <div class="mb-3">
              <h5 class="card-title">Contact List <span class="text-muted fw-normal ms-2">(834)</span></h5>
          </div>
      </div>
      <div class="col-md-6">
          <div class="d-flex flex-wrap align-items-center justify-content-end gap-2 mb-3">
              <div>
                  <ul class="nav nav-pills">
                      <li class="nav-item">
                          <a
                              aria-current="page"
                              href="#"
                              class="router-link-active router-link-exact-active nav-link active"
                              data-bs-toggle="tooltip"
                              data-bs-placement="top"
                              title=""
                              data-bs-original-title="List"
                              aria-label="List"
                          >
                              <i class="bx bx-list-ul"></i>
                          </a>
                      </li>
                      <li class="nav-item">
                          <a href="#" class="nav-link" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="Grid" aria-label="Grid"><i class="bx bx-grid-alt"></i></a>
                      </li>
                  </ul>
              </div>
              <div>
                  <a href="#" data-bs-toggle="modal" data-bs-target=".add-new" class="btn btn-primary"><i class="bx bx-plus me-1"></i> Add New</a>
              </div>
              <div class="dropdown">
                  <a class="btn btn-link text-muted py-1 font-size-16 shadow-none dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="bx bx-dots-horizontal-rounded"></i></a>
                  <ul class="dropdown-menu dropdown-menu-end">
                      <li><a class="dropdown-item" href="#">Action</a></li>
                      <li><a class="dropdown-item" href="#">Another action</a></li>
                      <li><a class="dropdown-item" href="#">Something else here</a></li>
                  </ul>
              </div>
          </div>
      </div>
  </div>
  <div class="row">
      <div class="col-lg-12">
          <div class="">
              <div class="table-responsive">
                  <table class="table project-list-table table-nowrap align-middle table-borderless">
                      <thead>
                          <tr>
                              <th scope="col" class="ps-4" style="width: 50px;">
                                  <div class="form-check font-size-16"><input type="checkbox" class="form-check-input" id="contacusercheck" /><label class="form-check-label" for="contacusercheck"></label></div>
                              </th>
                              <th scope="col">Name</th>
                              <th scope="col">Position</th>
                              <th scope="col">Email</th>
                              <th scope="col">Projects</th>
                              <th scope="col">Name</th>
                              <th scope="col">Position</th>
                              <th scope="col">Email</th>
                              <th scope="col">Projects</th>
                              <th scope="col">Projects</th>
                              <th scope="col" style="width: 200px;">Action</th>
                          </tr>
                      </thead>
                      <tbody>
                          <tr>
                              <th scope="row" class="ps-4">
                                  <div class="form-check font-size-16"><input type="checkbox" class="form-check-input" id="contacusercheck1" /><label class="form-check-label" for="contacusercheck1"></label></div>
                              </th>
                              <td>titre</td>
                              <td>SimonRyles@minible.com</td>
                              <td>SimonRyles@minible.com</td>
                              <td>125</td>
                              <td>titre</td>
                              <td>SimonRyles@minible.com</td>
                              <td>SimonRyles@minible.com</td>
                              <td>125</td>
                              <td>125</td>
                              <td>
                                  <ul class="list-inline mb-0">
                                      <li class="list-inline-item">
                                            mo                         
                                  </li>
                                      <li class="list-inline-item">raay
                                      </li>
                                      <li class="list-inline-item dropdown">
                                          ok
                                      </li>
                                  </ul>
                              </td>
                          </tr>
                          <tr>
                            <th scope="row" class="ps-4">
                                <div class="form-check font-size-16"><input type="checkbox" class="form-check-input" id="contacusercheck1" /><label class="form-check-label" for="contacusercheck1"></label></div>
                            </th>
                            <td>titre</td>
                            <td>SimonRy</td>
                            <td>SimonRyle</td>
                            <td>125</td>
                            <td>titre</td>
                            <td>SimonRyles@</td>
                            <td>SimonRyles@</td>
                            <td>125</td>
                            <td>125</td>
                            <td>
                                <ul class="list-inline mb-0">
                                    <li class="list-inline-item">
                                          mo                         
                                </li>
                                    <li class="list-inline-item">raay
                                    </li>
                                    <li class="list-inline-item dropdown">
                                        ok
                                    </li>
                                </ul>
                            </td>
                        </tr>
                      </tbody>
                  </table>
              </div>
          </div>
      </div>
  </div>
 
     
