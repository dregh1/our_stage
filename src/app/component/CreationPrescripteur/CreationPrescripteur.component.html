

<body>
  <section class="mx-3">
    <div class="mx-2 pt-5">
      <fieldset class="form-group border border-1 p-3">
        <legend class="w-auto px-2">Prescripteur</legend>
        <!--  -->
        <div class="card card-body">
          <main class="order-1">
 
            <div class="container-xxl pt-4">
              <div class="row">
                <div class="col-sm-12 col-lg-3 offset-lg-1" style="width: 80%;">
                 
                  <!-- <form class="needs-validation mb-5" novalidate> -->
                  <div class="row">
                      <div class="col-md-6">
                     
                          <div class="col-sm-4 col-md-6 mb-3">
                            <div class="mb-3">
                              <label for="email" id="emailLabel" class="form-label is-required">Date de creation<span class="visually-hidden"> (required)</span></label>
                              <input type="datetime-local" class="form-control"  id="lastName" aria-labelledby="lastNameLabel lastNameFeedback" autocomplete="family-name" required>
                              
                              <div class="valid-feedback">
                                Bien!
                              </div>
                              <div id="emailFeedback" class="invalid-feedback">
                                date vide.
                              </div>
                            </div>
                          <!-- <span class="text-primary me-1">*</span>indicates required -->
                          <label for="selectTitle" id="selectTitleLabel" class="form-label is-required">Titre<span class="visually-hidden"> (required)</span></label>
                          <div class="input-group mb-2">
                            <select
                              class="form-select"
                              [(ngModel)]="this.demande.idTitreDepense"
                              id="idtitre"aria-labelledby="countryLabel countryFeedback" autocomplete="country-name" required
                            >
                              <ng-container *ngFor="let titre of this.titres">
                                <option
                                  *ngIf="titre.idDirection === this.direction.id && titre.designation!='sans titre'"
                                  [value]="titre.id"
                                >
                                  {{ titre.designation }}
                                </option>
                              </ng-container>
                            </select>
        
                            <button
                              class="btn btn-outline-secondary"
                              data-bs-toggle="modal"
                              data-bs-target="#exampleModal"
                              data-bs-whatever="@mdo"
                            >
                              +
                            </button>
                          </div>
                         
                            <div class="valid-feedback">
                              Bien!
                            </div>
                            <div id="selectTitleFeedback" class="invalid-feedback">
                              titre vide.
                            </div>
                          </div>
                          <div class="col-12">
                            <div class="mb-3">
                              <label for="firstName" id="firstNameLabel" class="form-label is-required">OPEX/CAPEX<span class="visually-hidden"> (required)</span></label>
                              <select class="form-select" id="country" [(ngModel)]="this.demande.depense" aria-labelledby="countryLabel countryFeedback" autocomplete="country-name" required>
                                  <!-- <option selected disabled value="" aria-hidden="true">Select a country</option> -->
                                  <option value="OPEX">OPEX</option>
                                  <option value="CAPEX">CAPEX</option>
                                </select>
                                <div class="valid-feedback">
                                Bien!
                              </div>
                              <div id="firstNameFeedback" class="invalid-feedback">
                                selectionnez opex ou capex .
                              </div>
                            </div>
                            <div class="mb-3">
                              <label for="firstName" id="firstNameLabel" class="form-label is-required">Type<span class="visually-hidden"> (required)</span></label>
                              <select class="form-select" id="country" [(ngModel)]="this.demande.typeReference" aria-labelledby="countryLabel countryFeedback" autocomplete="country-name" required>
                                  <!-- <option selected disabled value="" aria-hidden="true">Select a country</option> -->
                                  <option value="BC">BC</option>
                                  <option value="DED">DED</option>
                                </select>
                                <div class="valid-feedback">
                                Bien!
                              </div>
                              <div id="firstNameFeedback" class="invalid-feedback">
                                selectionnez une type de reference.
                              </div>
                            </div>
                            <div class="mb-3">
                              <label for="email" id="emailLabel" class="form-label is-required">Devise<span class="visually-hidden"> (required)</span></label>
                              <select class="form-select" id="country" [(ngModel)]="this.demande.typeDevise" aria-labelledby="countryLabel countryFeedback" autocomplete="country-name" required>
                                  <!-- <option selected disabled value="" aria-hidden="true">Select a country</option> -->
                                  <option value="MGA">MGA</option>
                                  <option value="USD">USD</option>
                                  <option value="EUR">EUR</option>
          
                                </select>
                              <div class="valid-feedback">
                                Bien!
                              </div>
                              <div id="emailFeedback" class="invalid-feedback">
                                Selectionnez le devise.
                              </div>
                            </div>
                            <div class="mb-3">
                              <label for="country" id="countryLabel" class="form-label is-required">Rubrique<span class="visually-hidden"> (required)</span></label>
                              <select class="form-select" [(ngModel)]="this.demande.idRubrique" aria-labelledby="countryLabel countryFeedback" autocomplete="country-name" required>
                                <option
                                    *ngFor="let item of this.rubriques"
                                    [value]="item.id"
                                  >
                                    {{ item.designation }}
                                </option>
                              </select>
                              <div class="valid-feedback">
                                Bien!
                              </div>
                              <div id="countryFeedback" class="invalid-feedback">
                                selectionnez le rubrique.
                              </div>
                            </div>
                            <div class="mb-3">
                              <label for="message" id="messageLabel" class="form-label is-required">Motif besoin<span class="visually-hidden"> (required)</span></label>
                              <button type="button" class="form-helper" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Help for text area">
                                <span class="visually-hidden">Helper for text area</span>
                              </button>
                              <textarea class="form-control" id="message"[(ngModel)]="this.demande.motif" rows="5" placeholder="votre motif" aria-labelledby="messageLabel messageFeedback" required></textarea>
                              <div class="valid-feedback">
                                Bien!
                              </div>
                              <div id="messageFeedback" class="invalid-feedback">
                                  Motif vide.
                              </div>
                              
                            </div>
                          </div>
                        </div>
          
                        <div class="col-md-6">
                         
                          <div class="col-sm-4 col-md-6 mb-3">
                              <br>
                              <label for="selectTitle" id="selectTitleLabel" class="form-label is-required">Regularisation<span class="visually-hidden"> (required)</span></label>
                            <!-- [(ngModel)]="this.demande.estRegularisation" <input type="checkbox" class="form-control form-check-input" id="firstName" aria-labelledby="firstNameLabel firstNameFeedback" autocomplete="given-name" required> -->
                            <input class="form-control form-check-input" [(ngModel)]="this.demande.estregularisation" type="checkbox"  role="switch" id="flexSwitchCheckChecked" checked>
                            
                            <div class="valid-feedback">
                              Bien!
                            </div>
                            <div id="selectTitleFeedback" class="invalid-feedback">
                              Regularisation vide.
                            </div>
                          </div>
                          <div class="mb-3">
                            <label for="email" id="emailLabel" class="form-label is-required">Direction<span class="visually-hidden"> (required)</span></label>
                            <select
                                  class="form-select"
                                  [(ngModel)]="this.demande.idPeriode"
                                  id="inputGroupSelect04"aria-labelledby="countryLabel countryFeedback" autocomplete="country-name" required
                                >
                                  <option
                                    *ngFor="let item of this.periodes"
                                    [value]="item.id"
                                  >
                                    {{ item.designation }}
                                  </option>
                            </select>
                            <div class="valid-feedback">
                              Bien!
                            </div>
                            <div id="emailFeedback" class="invalid-feedback">
                              Periode vide.
                            </div>
                          </div>
                          <div class="col-12">
                            <div class="mb-3">
                              <label for="firstName" id="firstNameLabel" class="form-label is-required">Fournisseurs<span class="visually-hidden"> (required)</span></label>
                              <input type="text" class="form-control" id="firstName" aria-labelledby="firstNameLabel firstNameFeedback" autocomplete="given-name" required>
                              <div class="valid-feedback">
                                Bien!
                              </div>
                              <div id="firstNameFeedback" class="invalid-feedback">
                                Fournisseurs vide.
                              </div>
                            </div>
                            <div class="mb-3">
                              <label for="lastName" id="lastNameLabel" class="form-label is-required">MontantHt<span class="visually-hidden"> (required)</span></label>
                              <input type="number" class="form-control"[(ngModel)]="this.demande.montantHt" id="lastName" aria-labelledby="lastNameLabel lastNameFeedback" autocomplete="family-name" required>
                              <div class="valid-feedback">
                                Bien!
                              </div>
                              <div id="lastNameFeedback" class="invalid-feedback">
                                MontantHt vide.
                              </div>
                            </div>
                            <div class="mb-3">
                              <label for="email" id="emailLabel" class="form-label is-required">Periode<span class="visually-hidden"> (required)</span></label>
                              <select
                                    class="form-select"
                                    [(ngModel)]="this.demande.idPeriode"
                                    id="inputGroupSelect04"aria-labelledby="countryLabel countryFeedback" autocomplete="country-name" required
                                  >
                                    <option
                                      *ngFor="let item of this.periodes"
                                      [value]="item.id"
                                    >
                                      {{ item.designation }}
                                    </option>
                              </select>
                              <div class="valid-feedback">
                                Bien!
                              </div>
                              <div id="emailFeedback" class="invalid-feedback">
                                Periode vide.
                              </div>
                            </div>
                            <div class="mb-3">
                              <label for="country" id="countryLabel" class="form-label is-required">Sous Rubrique<span class="visually-hidden"> (required)</span></label>
                              <input type="text" class="form-control" [(ngModel)]="this.demande.sousRubrique" id="lastName" aria-labelledby="lastNameLabel lastNameFeedback" autocomplete="family-name" required>
                              
                              <div class="valid-feedback">
                                Bien!
                              </div>
                              <div id="countryFeedback" class="invalid-feedback">
                                sous Rubrique vide.
                              </div>
                            </div>
                          
                            
                            <div class="mb-3">
                              
                              <label for="message" id="messageLabel" class="form-label is-required">Commentaire<span class="visually-hidden"> (required)</span></label>
                              <button type="button" class="form-helper" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Help for text area">
                                <span class="visually-hidden">Helper for text area</span>
                              </button>
                              <textarea class="form-control" id="message" [(ngModel)]="this.demande.comsPrescripteur" rows="5" placeholder="votre commentaire" aria-labelledby="messageLabel messageFeedback" required></textarea>
                              <div class="valid-feedback">
                                Bien!
                              </div>
                              <div id="messageFeedback" class="invalid-feedback">
                                commentaire vide.
                              </div>
                            </div>
                            <button (click)="test()">test</button>
                           
                          </div>
                        </div>
                  </div>
                  <!-- </form> -->
                </div>
              </div>
            </div>
          </main>
          <!-- <div class="mx-4 p-4">
            <div class="justify-content-around d-flex">
              

              <div class="d-flex">
                
                <div class="label">
                  <span class="input-group-text mb-2" id="basic-addon1"
                    >Regularisation *</span
                  >
                  <span class="input-group-text mb-2" id="basic-addon1"
                  >opax/capex</span
                >
                  <span class="input-group-text mb-2" id="basic-addon1"
                    >Type Réference</span
                  >
                  
                  <span class="input-group-text mb-2" id="basic-addon1"
                    >Devise *</span
                  >
                  <span class="input-group-text mb-2" id="basic-addon1"
                    >Rubrique *</span
                  >
                 
                </div>
                <div class="mx-3">
                  <div class="form-check mb-2 form-switch">
                    <input
                      class="form-check-input"
                      [(ngModel)]="this.demande.estregularisation"
                      type="checkbox"
                      role="switch"
                      id="flexSwitchCheckChecked"
                      checked
                    />
                  </div>
                  <div class="input-group mb-2">
                    <select
                      class="form-select"
                      [(ngModel)]="this.demande.depense"
                     
                      aria-label="Example select with button addon"
                    >
                      <option value="OPAX">OPAX</option>
                      <option value="CAPEX">CAPEX</option>
                    </select>
                  </div>
                  <div class="input-group mb-2">
                    <select
                      class="form-select"
                      [(ngModel)]="this.demande.typeReference"
                      id="inputGroupSelect04"
                      aria-label="Example select with button addon" (ngModelChange)="refencedemande()"
                    >
                      <option selected value="BC"> BC</option>
                      <option value="DED"> DED</option>
                    </select>
                  
                    <div *ngIf="nomrefence===true">
                      <input
                      type="text"
                      step="any"
                      [(ngModel)]="this.demande.nomReference"
                      class="form-control mb-2 mx-2"
                      placeholder=""
                      aria-label=""
                      aria-describedby="basic-addon1"
                    />
                    </div>
                  
                  </div>
                 
                  
                  <div class="input-group mb-2">
                    <select
                      class="form-select"
                      [(ngModel)]="this.demande.typeDevise"
                      aria-label="Example select with button addon"
                      required
                    >
                      <option value="EUR">EUR</option>
                      <option value="USD">USD</option>
                      <option value="MGA">MGA</option>
                    </select>
                  </div>
                  <div class="input-group mb-2">
                    <select
                      class="form-select"
                      [(ngModel)]="this.demande.idRubrique"
                      id="inputGroupSelect04"
                      aria-label="Example select with button addon"
                    >
                      <option
                        *ngFor="let item of this.rubriques"
                        [value]="item.id"
                      >
                        {{ item.designation }}
                      </option>
                    </select>
                  </div>
                
                </div>
              </div>

              <div class="d-flex">
                <div class="label">
                  <span class="input-group-text mb-2" id="basic-addon1"
                    >Titre</span
                  >
                  
                  <span class="input-group-text mb-2" id="basic-addon1"
                    >fournisseurs</span
                  >
                  <span class="input-group-text mb-3" id="basic-addon1"
                    >Montant HT *</span
                  >
                  <span class="input-group-text mb-2" id="basic-addon1"
                    >Sous Rubrique</span
                  >
                  <span class="input-group-text mb-2" id="basic-addon1"
                    >Période prestation *</span
                  >
                </div>
                <div class="mx-3">
                  <div class="input-group mb-2">
                    <select
                      class="form-select"
                      [(ngModel)]="this.demande.idTitreDepense"
                      id="idtitre"
                      aria-label="Liste déroulante des titres de dépenses"
                    >
                      <ng-container *ngFor="let titre of this.titres">
                        <option
                          *ngIf="titre.idDirection === this.direction.id && titre.designation!='sans titre'"
                          [value]="titre.id"
                        >
                          {{ titre.designation }}
                        </option>
                      </ng-container>
                    </select>

                    <button
                      class="btn btn-outline-secondary"
                      data-bs-toggle="modal"
                      data-bs-target="#exampleModal"
                      data-bs-whatever="@mdo"
                    >
                      +
                    </button>
                  </div>
                <div class="input-group mb-2">
                    <select
                      class="form-select"
                      [(ngModel)]="this.demande.idFournisseur"
                      id="inputGroupSelect04"
                      aria-label="Example select with button addon"
                    >
                      <option
                        *ngFor="let item of this.fournisseurs"
                        [value]="item.id"
                      >
                        {{ item.nom }}
                      </option>
                    </select>
                  </div>
                  <input
                    type="number"
                    step="any"
                    [(ngModel)]="this.demande.montantHt"
                    class="form-control mb-2"
                    placeholder=""
                    aria-label=""
                    aria-describedby="basic-addon1"
                  />
                  <input
                    type="text"
                    class="form-control mb-2"
                    placeholder=""
                    aria-label=""
                    [(ngModel)]="this.demande.sousRubrique"
                    aria-describedby="basic-addon1"
                  />
                  <div class="input-group mb-2">
                    <select
                      class="form-select"
                      [(ngModel)]="this.demande.idPeriode"
                      id="inputGroupSelect04"aria-labelledby="countryLabel countryFeedback" autocomplete="country-name" required
                    >
                      <option
                        *ngFor="let item of this.periodes"
                        [value]="item.id"
                      >
                        {{ item.designation }}
                      </option>
                    </select>
                  </div>
                </div>
              </div>
              
            </div>
            <label for="validationTextarea" class="form-label is-required">Motif<span class="visually-hidden"> (required)</span></label>
            <textarea class="form-control" [(ngModel)]="this.demande.motif" ></textarea>
            <label for="validationTextarea" class="form-label is-required">Commentaire<span class="visually-hidden"> (required)</span></label>
            <textarea class="form-control" [(ngModel)]="this.demande.comsPrescripteur" ></textarea>
         
            </div> -->
        </div>
      </fieldset>
      <div class="bt p-3 d-flex justify-content-end">
        <div class="error-message">
          <p class="text-success">{{ errorMessage }}</p>
        </div>
        <div class="dropdown border-success dropup position-fixed bottom-0 end-0 mb-3 me-3 bd-mode-toggle">
          Demande enregistré
        </div>
              <button
              type="button"
              class="btn btn-primary "
              (click)="creerDemande()"
            >
              Enregistrer 
            </button>
        
      </div>
    </div>
  </section>
</body>

<!--POP UP TITRTE-->
<div
  class="modal fade"
  id="exampleModal"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title h5" id="exampleModalLabel">Titre</h1>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          data-bs-toggle="tooltip"
          data-bs-placement="bottom"
          data-bs-title="Close"
        >
          <span class="visually-hidden">Close</span>
        </button>
      </div>
      <div class="modal-body">
        <form>
          <div class="mb-3">
            <label for="recipient-name" class="col-form-label"
              >Ajout titre:</label
            >
            <input
              type="text"
              class="form-control"
              [(ngModel)]="TitreDepense.designation"
              [ngModelOptions]="{ standalone: true }"
              id="recipient-name"
            />
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button
          type="button"
          class="btn btn-primary"
          (click)="Ajouttitre()"
          data-bs-dismiss="modal"
        >
          Enregistrer
        </button>
      </div>
    </div>
  </div>
</div>
<footer class="footer navbar" data-bs-theme="dark">
  <h2 class="visually-hidden">Sitemap and information</h2>
  <div class="container-xxl footer-terms">
    <ul class="navbar-nav gap-md-3">
      <li class="fw-bold">© Orange 2024</li>
      <li><a class="nav-link" href="#">Terms and conditions</a></li>
      <li><a class="nav-link" href="#">Privacy</a></li>
      <li><a class="nav-link" href="#">Cookie policy</a></li>
      <li><a class="nav-link" href="#">Accessibility statement</a></li>
      <li><a class="nav-link active" id="test" href="#" aria-current="page">Become a reseller</a></li>
    </ul>
  </div>
</footer>